# 🐱 WidgetBuddy 개발 일지

## 1주차 (11.05 ~ 11.10)
* **[11.05]** (학습) Android Studio를 설치하고, '아이스크림 내기' 어플 제작 학습을 시작함.
* **[11.07]** (학습) activity_main.xml을 이용해서 UI 배치하는 것을 학습함.
* **[11.08]** (문제) 안드로이드 스튜디오로 '아이스크림 내기' 어플을 제작하는 도중에, 노트북 배터리 부족으로 강제종료 후 IDE 먹통  
-> (해결) 캐시 무효화도 해보고, 다양한 시도를 해보았지만 해당 프로젝트를 실행만 하면 프로그램이 먹통이 됨.  
   따라서 강의를 따라하는 것은 이곳에서 멈추고, 바로 본 프로젝트로 들어가기로 하였음
* **[11.09]** (Task) 프로젝트 기획 수정 ('위젯 드래곤' -> '위젯 버디') 및 1단계(기반 공사: 의존성 추가, 스켈레톤 파일 생성) 완료.
* **[11.10]** (문제) 3단계 빌드 중, 'AAPT: error: resource xml/pet_widget_info not found' 리소스 오류가 Gradle 설정(SDK, JVM)을 수정해도 계속 발생.
-> (해결) 최신 Glance 라이브러리가 해당 XML을 자동 생성해 줄 것이라 예상했으나, 공식 문서를 재확인한 결과 'AppWidgetProvider'의 고전 방식처럼 'res/xml/' 폴더에 수동으로 생성해야 하는 파일이었음. 파일을 직접 정의하여 해결.

## 2주차 (11.11 ~ 11.17)
* **[11.11]** (Task) 4단계 핵심 기능 구현: '밥주기'/'놀아주기' 버튼 추가 및 '즐거움(Joy)' 스탯 신규 도입. 'NEEDS_LOVE' 상태와 MainActivity 연동 로직 구현.
* **[11.12]** (문제) 4단계 기능 테스트 중, '알로 돌아가는 버그', '부화가 안 되는 버그', '배고픔이 100이 되는 버그' 등 복합적인 데이터 불일치 및 크래시 문제 발생. -> (해결) 원인은 DataStore 업데이트 시 as MutablePreferences를 사용한 ClassCastException 크래시와, TimeUnit.HOURS로 인한 시간 계산 오류였음. toMutablePreferences()로 코드를 수정하고, 위젯을 삭제/재설치하여 WorkManager 작업을 갱신함으로써 모든 버그 해결.
* **[11.13]** (Task) 날짜 세는 기능 구현, 랜덤 메시지 구현, '가출 시스템' 구현: '불행(Misery)' 스탯을 도입, 펫을 방치하면 'WARNING' 상태를 거쳐 'RUNAWAY' (가출) 상태가 되도록 PetStateCalculator 로직 완성.
* **[11.16]** (Task) '가출' 펫 복귀(광고 시뮬) 로직 및 '사랑 주기' 버튼 연동 '꾸미기 포인트' (가구 언락) 기능 구현.
* **[11.17]** (Task) 'HUNGER' 스탯을 'SATIETY'(포만감)로 리팩토링, '말걸기' 버튼 추가 및 Google AdMob (보상형 광고) 실제 로직 연동.

## 3주차 (11.18 ~ 11.24)
* **[11.18]** (Task) 위젯 UI 최종 구상 및 디자인 최적화 준비  
: 위젯에 레트로 게임 콘솔 배경 이미지를 적용하여 최종 디자인을 결정함. 버튼 터치 영역(Hitbox)을 배경 이미지의 컨트롤러에 정확히 맞추기 위한 레이아웃 조정 방법 구상.
* **[11.19]** (Task) 레트로 콘솔 테마 위젯 최종 구현 및 정밀 배치
   * 레이아웃 변경: Glance 위젯 레이아웃을 기존 수직(Column) 기반에서 수평(Row) 기반으로 완전히 재구성하여 콘솔 디자인에 최적화함.
   * 정밀 배치: 화면 영역에 `defaultWeight()` 대신 고정 `height`와 `width`를 부여하고 비대칭 `padding`을 사용하여, 버튼 및 화면 영역을 배경 이미지의 컨트롤러/스크린 영역에 정확히 일치시키는 작업을 완료함.
* **[11.20]** (Task) 메인 앱 구조 분리 및 기능 재배치
   * 구조 개편: `Scaffold`와 `Bottom Navigation Bar`를 도입하여 메인 앱 화면을 펫 하우스와 설정 화면으로 분리함.
   * 로직 통합: 꾸미기 포인트에 따른 배경 변경 로직과 가출 시 광고 시청 후 복귀 로직을 `PetHouseScreen`에 통합하여 구현.
   * 오류 해결: Gradle 카탈로그의 버전 참조 문제 및 `Context.lifecycleScope` 접근 오류를 해결하고 컴파일을 완료함.
* **[11.21] ~ [11.22]** (Task) 픽셀 아트 그래픽 리소스 제작
   * 앱에 생동감을 더할 다양한 픽셀 아트(도트) 리소스를 직접 제작함.
   * 펫(뱁새, 용)의 다양한 상태별(기본, 밥먹기, 놀기, 배고픔 등) 스프라이트 제작.
   * 메인 앱 '펫 하우스'를 꾸밀 단계별 가구(카펫, 벽난로, 소파 등) 및 배경 이미지 제작.
   * 앱 아이콘, 스플래시 로고, 가출 쪽지 등 전반적인 UI 요소에 레트로 감성을 통일감 있게 적용.
* **[11.23]** (Task) 실기기 테스트 및 핵심 로직 버그 수정
   * 에뮬레이터가 아닌 실제 안드로이드 기기에서 최종 테스트를 진행하며 발견된 문제점들을 해결함.
   * (버그 1) 펫 부화 직후 메인 앱에서 포인트가 지급되지 않는 문제 -> 부화 시 날짜 기록 초기화 로직 추가로 해결.
   * (버그 2) 위젯과 메인 앱 간의 보상(하트/포인트) 지급 로직 충돌 -> '꾸미기 포인트 지급용 날짜 키'를 별도로 분리하여 독립적인 보상 체계 구축.
   * (버그 3) 스탯이 가득 찼을 때 상호작용 시 하트가 지급되지 않는 문제 -> 로직 순서를 변경하여 사용자의 상호작용 시도 자체를 인정하도록 개선.
* **[11.24]** (Task) 구글 플레이 스토어 배포
   * 프로젝트의 최종 목표인 구글 플레이 스토어 배포를 진행함.
   * 서명된 앱 번들(.aab) 생성, 스토어 등록정보(설명, 아이콘, 그래픽 이미지, 스크린샷) 작성, 앱 콘텐츠(개인정보처리방침, 등급, 타겟층) 설정 등 필수 절차를 완료함.
   * '비공개 테스트(Closed Testing)' 트랙에 버전을 업로드하고 검토를 요청하며 3주간의 개발 여정을 성공적으로 마무리함.
